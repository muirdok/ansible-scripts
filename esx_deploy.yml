- hosts:
   - test
  user: root
  vars:
   vcenter_hostname: 10.3.53.156
   username: administrator
   password: Nexenta2
   template: "Linux-tmp"
   vmnameprefix: LinuxMix
   resource_pool: "/Resources"
   cluster: foo
   datacenter: QA
   esxname: 10.3.70.16
  tasks:
  - name: Deploy 5 ANY VM from templte
    vsphere_guest:
      vcenter_hostname: "{{ vcenter_hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
      from_template: yes
      template_src: "{{template}}"
      resource_pool: "{{ resource_pool }}"
      cluster: "{{ cluster }}"
      esxi:
        datacenter: "{{ datacenter }}"
        hostname: "{{ esxname }}"
      guest: "{{vmnameprefix}}{{ item }}"
    with_items:
      - "-vm1"
      - "-vm2"
      - "-vm3"
      - "-vm4"
      - "-vm5"
      - "-vm6"
      - "-vm7"
      - "-vm8"


